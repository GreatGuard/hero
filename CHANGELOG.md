# 更新日志 (CHANGELOG)

本文档记录了英雄无敌 (Heroes Invincible) 项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
并且本项目遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [4.0.0] - 2026-01-15

### 新增
- **存档系统**: 完整的存档和读档功能，支持5个存档槽位
  - JSON格式存储
  - 数据完整性验证
  - 存档摘要显示
- **统计系统**: 全面的游戏数据追踪
  - 战斗统计（场次、胜负、胜率）
  - 资源统计（金币、经验、装备）
  - 事件统计（触发次数、类型分布）
  - 多维度数据分析
- **任务系统**: 随机生成的支线任务
  - 4种任务类型（击杀、收集、到达、使用）
  - 任务进度追踪
  - 任务奖励系统
- **职业系统**: 三种职业选择
  - 战士：高血量，擅长近战
  - 法师：掌握魔法，拥有法力值
  - 刺客：高攻击，擅长快速攻击
  - 职业专属技能和被动效果
- **技能树系统**: 可视化技能升级路径
  - 每个职业专属技能树
  - 技能前置要求
  - 技能点消耗系统
  - 技能等级和效果提升
- **装备强化系统**: 装备升级机制
  - 强化等级+1至+15
  - 每级提升10%基础属性
  - 强化到+10解锁传说属性
- **装备附魔系统**: 装备特殊效果
  - 5种附魔类型（火焰、冰霜、毒素、神圣、暗影）
  - 附魔成功率机制
  - 装备类型限制
- **成就系统**: 20个成就收集
  - 进度成就（第一步、探险家等）
  - 战斗成就（首杀、怪物杀手等）
  - 资源成就（第一桶金、富有冒险者等）
  - 装备成就（第一件装备、传奇收藏家等）
  - 技能成就（第一项技能、技能大师等）
  - 等级成就（升级、资深冒险者等）
  - 特殊成就（游戏通关、生存专家等）
- **Boss战机制**: 多阶段Boss战斗
  - 7种专属Boss（每个地图类型一种）
  - Boss多阶段战斗（血量<50%狂暴）
  - Boss技能系统（每3回合使用特殊技能）
  - 10种不同Boss技能
  - Boss击败后丰厚奖励
- **游戏设置系统**: 玩家自定义选项
  - 文本显示速度
  - 自动存档设置
  - 事件提示详细程度
  - 战斗动画效果
  - 战斗日志详细程度
- **游戏日志系统**: 游戏历史记录
  - 6种日志类型（战斗、事件、物品、升级、移动、成就）
  - 日志统计和筛选
  - 日志清空功能
  - 多语言显示
- **错误处理系统**: 统一错误处理
  - 全局错误处理器
  - 错误日志记录
  - 用户友好错误消息
  - 调试模式支持
  - 输入验证

### 内容扩展
- **新地图类型**: 沼泽和雪原
  - 沼泽：有毒环境，特殊事件（毒雾、流沙、稀有药草、沼泽商人）
  - 雪原：寒冷环境，特殊事件（冻伤、雪崩、冰窟、冰霜效果）
- **新怪物**: 6种新怪物
  - 沼泽：鳄鱼、毒蛇、沼泽巨兽
  - 雪原：冰狼、雪怪、冰霜巨人
- **新Boss**: 2种新Boss
  - 沼泽九头蛇
  - 冰霜之王
- **新技能**: 4种新技能
  - 连斩：连续攻击2次，每次50%伤害
  - 护盾：下次受到伤害减少50%
  - 狂暴：下3回合攻击提升50%，防御降低50%
  - 专注：下次攻击必中且暴击
- **状态效果系统**: 中毒、冻伤、冰霜效果
  - 持续时间管理
  - 状态效果伤害计算
  - 状态效果在战斗中的应用

### 性能优化
- **文本缓存优化**: 文本获取速度提升约80%
- **事件随机逻辑优化**: 事件选择速度提升约80%
- **装备生成优化**: 装备生成速度提升约70%
- **属性更新优化**: 属性更新速度提升约75%
- **整体性能**: 支持长时间游戏（10000+步）无卡顿

### 测试改进
- **测试覆盖率提升**: 从约60%提升到90%+
- **新测试文件**: 为所有新系统添加全面测试
  - test_save_data.py (10个测试)
  - test_statistics.py (16个测试)
  - test_quest.py (8个测试)
  - test_achievements.py (8个测试)
  - test_class.py (9个测试)
  - test_skill_tree.py (17个测试)
  - test_settings.py (9个测试)
  - test_game_log.py (多个测试)
  - test_error_handler.py (多个测试)
- **平衡测试工具**: 自动化平衡测试系统
  - 支持1000次游戏自动运行
  - 统计通关率、平均步数、资源获取
  - 生成详细的平衡性报告

### 破坏性变更
- **移除学习技能功能**: 游戏中不再支持随机学习新技能
  - 商人事件移除技能学习选项
  - 新手村移除技能学习训练场
  - 升级时不再自动学习新技能
  - 保留完整的技能树系统，只能使用初始技能

## [3.0.0] - 2024

### 新增
- **模块化重构**: 将代码拆分为多个功能模块
- **装备系统**: 完整的装备系统
  - 武器、防具、饰品三种装备栏位
  - 5种稀有度（普通、优秀、稀有、史诗、传说）
  - 随机属性生成
  - 装备商店
- **多地图类型**: 5种地图类型
  - 平原、森林、沙漠、地牢、山脉
  - 每种地图有独特的事件和怪物
- **多难度级别**: 4种难度级别
  - 简单、普通、困难、噩梦
  - 不同的地图长度和奖励倍率

### 修复
- **地图长度修复**: 修复地图长度不随难度变化的bug
- **项目结构**: 按Python标准项目结构整理目录

## [2.0.0] - 2023

### 新增
- **多语言支持**: 完整的中英文国际化系统
- **新手村系统**: 教程和准备区域
  - 训练场、商店、诊所、村长家
- **技能系统**: 基础技能系统
  - 火球术、吸血、闪避、暴击、治疗术

### 改进
- **战斗系统**: 优化战斗逻辑和体验

## [1.0.0] - 2022

### 新增
- **基础游戏功能**: 核心游戏机制
  - 英雄系统
  - 战斗系统
  - 随机事件
  - 成长系统

---

## 版本说明

- **主版本号**: 不兼容的API修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

---

*最后更新: 2026-01-15*